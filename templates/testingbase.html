<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet"><link rel="stylesheet" href="static/styles.css">
<script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<div style="height:0px; overflow-y:visible; position:absolute">
    <div class="resize-drag d-flex flex-column scroll-container" style="position:fixed; visibility: hidden" >
      <!-- Upper bar -->
      <div class="d-flex upper-bar px-1 py-1 flex-row align-items-center">
        <image src="static/assets/RethinkLogo.png" style="height:15px; width:15px;">
        <div class="d-flex flex-grow-1 ps-1">
          <p class="my-0" style="color:white; font-size: 12px">Rethink</p>
        </div>
        <image class="ignore-drag ignore-resize close-button" src="/static/assets/closebutton.png" style="height:15px; width:15px;cursor:pointer">
      </div>
      <!-- Body of the window -->
      <div class="d-flex flex-grow-1 flex-column px-2 ignore-drag" style="overflow: scroll">
        <!-- Tab controls-->
        <ul class="nav d-flex flex-row mt-2" id="myTab" role="tablist">
          <li class="nav-item d-flex flex-grow-1 justify-content-center" role="presentation">
            <a class="tab-control active" id="debrief-tab" data-bs-toggle="tab" href="#debrief" role="tab">Debrief</a>
          </li>
          <li class="nav-item d-flex flex-grow-1 justify-content-center" role="presentation">
            <a class="tab-control" id="sources-tab" data-bs-toggle="tab" href="#sources" role="tab">Sources</a>
          </li>
          <li class="nav-item d-flex flex-grow-1 justify-content-center" role="presentation">
            <a class="tab-control" id="focus-tab" data-bs-toggle="tab" href="#focus" role="tab">Community</a>
          </li>
          <li class="nav-item d-flex flex-grow-1 justify-content-center" role="presentation">
            <a class="tab-control" id="media-diet-tab" data-bs-toggle="tab" href="#media-diet" role="tab">Media Diet</a>
          </li>
        </ul>
        <hr class="my-2">
        <!-- TAB CONTENT -->
        <div class="tab-content">
          <!-- Debrief -->
          <div class="tab-pane show active" id="debrief" role="tabpanel" aria-labelledby="home-tab">
            <div class="text-area">
              {{ summary }}
            </div>
            <span class="d-flex justify-content-center my-2" style="font-weight: 600; text-decoration: underline;">
              Sources
            </span>
            <div class="d-flex flex-row align-items-center mb-1" style="font-weight:600">
              <div class="w-40">
                <span class="">Publisher</span>
              </div>
              <div class="d-flex flex-row justify-content-center w-60">
                <span class="mx-1 w-25">Date</span>
                <span class="mx-1 w-25">Factuality</span>
                <span class="mx-1 w-25">Bias</span>
                <span class="mx-1 w-25">Credibility</span>
              </div>
            </div>
            {% for source in summary_sources %}
            <div class="d-flex flex-row align-items-center my-1">
              <div class="w-40">
                <image src="/static/assets/RethinkLogo.png" style="height:30px; width:30px;border-radius:40px"></image>
                <a class="focus-text mx-1" href='{{ source["url"] }}' style="color: black; text-decoration: none;">{{ source["name"] }}</a>
              </div>
              <div class="d-flex flex-row justify-content-center w-60">
                <span class="mx-1 w-25">{{ source["date"] }}</span>
                <span class="mx-1 w-25">{{ source["factuality"] }}</span>
                <span class="mx-1 w-25">{{ source["bias"] }}</span>
                <span class="mx-1 w-25">{{ source["credibility"] }}</span>
              </div>
            </div>
            {% endfor %}
          </div>
          <!-- Sources -->
          <div class="tab-pane" id="sources" role="tabpanel" aria-labelledby="sources-tab">
            <span class="d-flex justify-content-center my-2" style="font-weight: 600; text-decoration: underline;">
              Alternative Sources
            </span>
            <div class="d-flex flex-row align-items-center mb-1" style="font-weight:600">
              <div class="w-40">
                <span class="">Publisher</span>
              </div>
              <div class="d-flex flex-row justify-content-center w-60">
                <span class="mx-1 w-25">Date</span>
                <span class="mx-1 w-25">Factuality</span>
                <span class="mx-1 w-25">Bias</span>
                <span class="mx-1 w-25">Credibility</span>
              </div>
            </div>
            {% for source in sources %}
            <div class="d-flex flex-row align-items-center mb-2">
              <div class="w-40">
                <image src="/static/assets/RethinkLogo.png" style="height:30px; width:30px;border-radius:40px"></image>
                <a class="focus-text mx-1" href='{{ source["url"] }}' style="color: black; text-decoration: none;">{{ source["name"] }}</a>
              </div>
              <div class="d-flex flex-row justify-content-center w-60">
                <span class="mx-1 w-25">{{ source["date"] }}</span>
                <span class="mx-1 w-25">{{ source["factuality"] }}</span>
                <span class="mx-1 w-25">{{ source["bias"] }}</span>
                <span class="mx-1 w-25">{{ source["credibility"] }}</span>
              </div>
            </div>
            {% endfor %}
          </div>
          <!-- Focus -->
          <div class="tab-pane" id="focus" role="tabpanel" aria-labelledby="focus-tab">
            <span class="d-flex justify-content-center my-2" style="font-weight: 600; text-decoration: underline;">
              Community Notes (3)
            </span>
            <div class="text-area mb-2">
              Note that this publication is owned in part by the Saudi Arabian government and therefore is unreliable for reporting in the Middle East.
              <a href="https://google.com">Source</a>
            </div>
            
            <div class="text-area mb-2">
              This article misquotes the original scientific article. The authors are much more reserved in their conclusion than this article would suggest.
              <a href="https://google.com">Source</a>
            </div>
            <div class="text-area mb-2">
              The person responsible for this murder has since been apprehended.
              <a href="https://google.com">Source</a>
            </div>
            <div class="d-flex flex-row justify-content-center mt-4">
              <button class="btn" style="background-color:#8E1D1D; color:white; max-width: 200px; font-size: 14px">Add Note</button>
            </div>
          </div>
          <!-- Media Diet -->
          <div class="tab-pane" id="media-diet" role="tabpanel" aria-labelledby="media-diet-tab">
            <span class="d-flex justify-content-center my-2" style="font-weight: 600; text-decoration: underline;">
              Your Media Diet
            </span>
            <div class="d-flex flex-row justify-content-center mt-4">
              Bias Score: {{ media_diet["score_dict"]["bias_score_avg"] }}
            </div>
            <canvas id="biasChart" chartData=' media_diet["bias_count"] | tojson }}'></canvas>
            <div class="d-flex flex-row justify-content-center mt-4">
              Factuality Score: {{ media_diet["score_dict"]["factuality_score_avg"] }}
            </div>
            <canvas id="factualityChart" chartData=' media_diet["bias_count"] | tojson }}'></canvas>
            <div class="d-flex flex-row justify-content-center mt-4">
              Credibility Score: {{ media_diet["score_dict"]["credibility_score_avg"] }}
            </div>
          </div>
        </div>
      </div>
      </div>
      <!-- Lower bar -->
      <div class="lower-bar ignore-drag"></div>
    </div>
  </div>